dist: bionic
language: crystal
crystal:
  - latest
  - nightly
git:
  submodules: false

before_install:
  - wget -O - https://apt.llvm.org/llvm-snapshot.gpg.key | sudo apt-key add -
  - sudo add-apt-repository 'deb http://apt.llvm.org/bionic/ llvm-toolchain-bionic-7 main'
  - sudo apt-get update
  - sudo apt-get install -y llvm-7-dev libclang-7-dev

script:
  - shards update
  - make
  - ./tests/backend/test-runner
  - ./tests/frontend/test-all
